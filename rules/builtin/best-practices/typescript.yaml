---
# Best Practices - TypeScript
# 20+ TypeScript-specific best practices

- id: BP001
  name: Any Type Usage
  description: Detects use of 'any' type which bypasses type checking
  severity: medium
  category: best-practices
  tags: [typescript, type-safety, any]
  languages: [typescript]
  patterns:
    regex: :\s*any\b
  message: Avoid 'any' type. Use specific types or 'unknown' for better type safety.

- id: BP002
  name: Non-Null Assertion
  description: Detects non-null assertion operator (!) which can cause runtime errors
  severity: low
  category: best-practices
  tags: [typescript, type-safety, null-safety]
  languages: [typescript]
  patterns:
    regex: \w+!\.|\w+!\[
  message: Non-null assertion bypasses type checking. Use optional chaining or explicit checks.

- id: BP003
  name: Type Assertion Instead of Type Guard
  description: Detects type assertions that should use type guards
  severity: low
  category: best-practices
  tags: [typescript, type-guards, type-safety]
  languages: [typescript]
  patterns:
    regex: as\s+\w+(?![\s\S]{1,50}instanceof|typeof)
  message: Consider using type guards instead of type assertions for runtime safety.

- id: BP004
  name: Missing Return Type
  description: Detects functions without explicit return types
  severity: low
  category: best-practices
  tags: [typescript, types, functions]
  languages: [typescript]
  patterns:
    regex: (export\s+)?(async\s+)?function\s+\w+\([^)]*\)\s*\{(?!.*:\s*\w+\s*{)
  conditions:
    fileExclude:
      - "**/*.test.ts"
      - "**/*.spec.ts"
  message: Add explicit return type for better type inference and documentation.

- id: BP005
  name: Implicit Any Parameter
  description: Detects function parameters without type annotations
  severity: medium
  category: best-practices
  tags: [typescript, parameters, type-safety]
  languages: [typescript]
  patterns:
    regex: function\s+\w+\([^:)]+\)
  message: Add type annotations to function parameters.

- id: BP006
  name: Enum Without Const
  description: Detects enums that should be const enums
  severity: low
  category: best-practices
  tags: [typescript, enums, optimization]
  languages: [typescript]
  patterns:
    regex: (?<!const\s)enum\s+\w+
  message: Use 'const enum' for better tree-shaking and performance.

- id: BP007
  name: Interface vs Type
  description: Detects type alias that should be interface
  severity: low
  category: best-practices
  tags: [typescript, interfaces, types]
  languages: [typescript]
  patterns:
    regex: type\s+\w+\s*=\s*\{
  message: Prefer interface over type for object shapes (better error messages, declaration merging).

- id: BP008
  name: Optional Property Over Undefined Union
  description: 'Detects prop?: Type | undefined which is redundant'
  severity: low
  category: best-practices
  tags: [typescript, optional, types]
  languages: [typescript]
  patterns:
    regex: \?\s*:\s*\w+\s*\|\s*undefined
  message: Optional property already includes undefined. Remove the union.

- id: BP009
  name: Unknown Over Any
  description: Suggests using unknown instead of any for type-safe programming
  severity: low
  category: best-practices
  tags: [typescript, type-safety, unknown]
  languages: [typescript]
  patterns:
    regex: catch\s*\([^)]*:\s*any\)
  message: Use 'unknown' in catch blocks instead of 'any' for type-safe error handling.

- id: BP010
  name: ReadonlyArray for Immutability
  description: Detects mutable arrays that should be readonly
  severity: low
  category: best-practices
  tags: [typescript, immutability, arrays]
  languages: [typescript]
  patterns:
    regex: (props|config|constants):\s*\w+\[\]
  message: Consider using ReadonlyArray or readonly modifier for immutability.

- id: BP011
  name: Strict Null Checks
  description: Detects potential null/undefined access
  severity: medium
  category: best-practices
  tags: [typescript, null-safety, strict]
  languages: [typescript]
  patterns:
    regex: \.\w+(?!\?)(?![\s\S]{1,30}(if|&&|\?\.))
  conditions:
    fileMatch:
      - "**/src/**/*.ts"
  message: Use optional chaining (?.) or null checks to prevent runtime errors.

- id: BP012
  name: Namespace Usage
  description: Detects namespace usage which is discouraged
  severity: low
  category: best-practices
  tags: [typescript, modules, namespaces]
  languages: [typescript]
  patterns:
    regex: namespace\s+\w+
  message: Prefer ES6 modules over namespaces.

- id: BP013
  name: Triple-Slash Directives
  description: Detects triple-slash directives which are mostly obsolete
  severity: low
  category: best-practices
  tags: [typescript, directives, legacy]
  languages: [typescript]
  patterns:
    regex: ///\s*<reference
  message: Triple-slash directives are mostly obsolete. Use import statements.

- id: BP014
  name: Never Type for Exhaustiveness
  description: Missing exhaustiveness check in switch/if-else
  severity: low
  category: best-practices
  tags: [typescript, exhaustiveness, type-safety]
  languages: [typescript]
  patterns:
    regex: switch\s*\([^)]+\)\s*\{(?![\s\S]+default:[\s\S]+assertNever|const _exhaustive)
  message: Add exhaustiveness check using never type for type safety.

- id: BP015
  name: Prefer Literal Types
  description: Detects string/number that could be literal types
  severity: low
  category: best-practices
  tags: [typescript, literal-types, type-safety]
  languages: [typescript]
  patterns:
    regex: (type|interface)[\s\S]{1,50}(status|type|kind):\s*string\s*[;}]
  message: Use literal types for known string values (e.g., 'success' | 'error').

- id: BP016
  name: Index Signature Misuse
  description: Detects overly broad index signatures
  severity: low
  category: best-practices
  tags: [typescript, index-signatures, types]
  languages: [typescript]
  patterns:
    regex: \[key:\s*string\]:\s*any
  message: Avoid [key: string]: any. Use Record<string, Type> or mapped types.

- id: BP017
  name: Utility Types Not Used
  description: Detects manual type definitions that could use utility types
  severity: low
  category: best-practices
  tags: [typescript, utility-types, built-ins]
  languages: [typescript]
  patterns:
    regex: type\s+\w+\s*=\s*\{[\s\S]+?\}\s*&\s*\{[\s\S]+?\}
  message: Consider using built-in utility types (Partial, Pick, Omit, etc.).

- id: BP018
  name: Prefer As Const
  description: Detects objects that should use as const
  severity: low
  category: best-practices
  tags: [typescript, const-assertions, immutability]
  languages: [typescript]
  patterns:
    regex: (export\s+)?const\s+\w+\s*=\s*\{[\s\S]{1,100}\}(?!\s+as\s+const)
  conditions:
    fileMatch:
      - "**/constants/**"
      - "**/config/**"
  message: Use 'as const' for literal type inference on constant objects.

- id: BP019
  name: Generic Type Constraints
  description: Detects generic types without constraints
  severity: low
  category: best-practices
  tags: [typescript, generics, constraints]
  languages: [typescript]
  patterns:
    regex: <T>(?!\s+extends)[\s\S]{1,50}\(
  message: Add constraints to generic types for better type safety (e.g., <T extends Base>).

- id: BP020
  name: Prefer Unknown in Generics
  description: Detects generics defaulting to any
  severity: low
  category: best-practices
  tags: [typescript, generics, type-safety]
  languages: [typescript]
  patterns:
    regex: <\w+\s*=\s*any>
  message: Default generics to unknown instead of any for type safety.

- id: BP021
  name: Missing Async Return Type
  description: Detects async functions without Promise return type
  severity: low
  category: best-practices
  tags: [typescript, async, promises, types]
  languages: [typescript]
  patterns:
    regex: async\s+function\s+\w+\([^)]*\)(?!:\s*Promise)
  message: Add explicit Promise<T> return type to async functions.

- id: BP022
  name: Type Import Not Used
  description: Detects regular imports that should be type imports
  severity: low
  category: best-practices
  tags: [typescript, imports, type-only]
  languages: [typescript]
  patterns:
    regex: import\s+\{\s*\w+\s*\}\s+from(?![\s\S]{1,200}:\s*\w+)
  conditions:
    fileMatch:
      - "**/types/**"
      - "**/*.types.ts"
  message: Use 'import type' for type-only imports to improve build performance.
